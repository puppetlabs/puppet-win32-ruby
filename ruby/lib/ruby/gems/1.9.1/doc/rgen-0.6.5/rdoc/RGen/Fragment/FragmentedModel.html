<?xml version="1.0" encoding="IBM437"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=IBM437" http-equiv="Content-Type" />

  <title>Class: RGen::Fragment::FragmentedModel</title>

  <link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

  <script src="../../js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="../../js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="../../lib/rgen/fragment/fragmented_model_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="lib/rgen/fragment/fragmented_model.rb">lib/rgen/fragment/fragmented_model.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="../../Object.html">Object</a></p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-i-add_fragment">#add_fragment</a></li>
          
          <li><a href="#method-i-add_fragment_change_listener">#add_fragment_change_listener</a></li>
          
          <li><a href="#method-i-index">#index</a></li>
          
          <li><a href="#method-i-remove_fragment">#remove_fragment</a></li>
          
          <li><a href="#method-i-remove_fragment_change_listener">#remove_fragment_change_listener</a></li>
          
          <li><a href="#method-i-resolve">#resolve</a></li>
          
          <li><a href="#method-i-unresolve_fragment">#unresolve_fragment</a></li>
          
          <li><a href="#method-i-unresolved_refs">#unresolved_refs</a></li>
          
        </ul>
      </div>
      

      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="../../CHANGELOG.html">CHANGELOG</a></li>
        
          <li class="file"><a href="../../MIT-LICENSE.html">MIT-LICENSE</a></li>
        
          <li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="../../images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="../../RGen.html">RGen</a></li>
        
          <li><a href="../../RGen/ECore.html">RGen::ECore</a></li>
        
          <li><a href="../../RGen/ECore/EAnnotation.html">RGen::ECore::EAnnotation</a></li>
        
          <li><a href="../../RGen/ECore/EAttribute.html">RGen::ECore::EAttribute</a></li>
        
          <li><a href="../../RGen/ECore/EAttribute/ClassModule.html">RGen::ECore::EAttribute::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/EClass.html">RGen::ECore::EClass</a></li>
        
          <li><a href="../../RGen/ECore/EClass/ClassModule.html">RGen::ECore::EClass::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/EClassifier.html">RGen::ECore::EClassifier</a></li>
        
          <li><a href="../../RGen/ECore/EClassifier/ClassModule.html">RGen::ECore::EClassifier::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/ECoreBuilderMethods.html">RGen::ECore::ECoreBuilderMethods</a></li>
        
          <li><a href="../../RGen/ECore/ECoreInterface.html">RGen::ECore::ECoreInterface</a></li>
        
          <li><a href="../../RGen/ECore/ECoreToRuby.html">RGen::ECore::ECoreToRuby</a></li>
        
          <li><a href="../../RGen/ECore/ECoreToRuby/FeatureWrapper.html">RGen::ECore::ECoreToRuby::FeatureWrapper</a></li>
        
          <li><a href="../../RGen/ECore/EDataType.html">RGen::ECore::EDataType</a></li>
        
          <li><a href="../../RGen/ECore/EEnum.html">RGen::ECore::EEnum</a></li>
        
          <li><a href="../../RGen/ECore/EEnumLiteral.html">RGen::ECore::EEnumLiteral</a></li>
        
          <li><a href="../../RGen/ECore/EFactory.html">RGen::ECore::EFactory</a></li>
        
          <li><a href="../../RGen/ECore/EGenericType.html">RGen::ECore::EGenericType</a></li>
        
          <li><a href="../../RGen/ECore/EModelElement.html">RGen::ECore::EModelElement</a></li>
        
          <li><a href="../../RGen/ECore/EModelElement/ClassModule.html">RGen::ECore::EModelElement::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/ENamedElement.html">RGen::ECore::ENamedElement</a></li>
        
          <li><a href="../../RGen/ECore/EObject.html">RGen::ECore::EObject</a></li>
        
          <li><a href="../../RGen/ECore/EOperation.html">RGen::ECore::EOperation</a></li>
        
          <li><a href="../../RGen/ECore/EPackage.html">RGen::ECore::EPackage</a></li>
        
          <li><a href="../../RGen/ECore/EPackage/ClassModule.html">RGen::ECore::EPackage::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/EParameter.html">RGen::ECore::EParameter</a></li>
        
          <li><a href="../../RGen/ECore/EReference.html">RGen::ECore::EReference</a></li>
        
          <li><a href="../../RGen/ECore/EStringToStringMapEntry.html">RGen::ECore::EStringToStringMapEntry</a></li>
        
          <li><a href="../../RGen/ECore/EStructuralFeature.html">RGen::ECore::EStructuralFeature</a></li>
        
          <li><a href="../../RGen/ECore/EStructuralFeature/ClassModule.html">RGen::ECore::EStructuralFeature::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/ETypeArgument.html">RGen::ECore::ETypeArgument</a></li>
        
          <li><a href="../../RGen/ECore/ETypedElement.html">RGen::ECore::ETypedElement</a></li>
        
          <li><a href="../../RGen/ECore/ETypedElement/ClassModule.html">RGen::ECore::ETypedElement::ClassModule</a></li>
        
          <li><a href="../../RGen/ECore/RubyToECore.html">RGen::ECore::RubyToECore</a></li>
        
          <li><a href="../../RGen/Environment.html">RGen::Environment</a></li>
        
          <li><a href="../../RGen/Fragment.html">RGen::Fragment</a></li>
        
          <li><a href="../../RGen/Fragment/DumpFileCache.html">RGen::Fragment::DumpFileCache</a></li>
        
          <li><a href="../../RGen/Fragment/FragmentedModel.html">RGen::Fragment::FragmentedModel</a></li>
        
          <li><a href="../../RGen/Fragment/ModelFragment.html">RGen::Fragment::ModelFragment</a></li>
        
          <li><a href="../../RGen/Fragment/ModelFragment/FragmentRef.html">RGen::Fragment::ModelFragment::FragmentRef</a></li>
        
          <li><a href="../../RGen/Fragment/ModelFragment/ResolvedReference.html">RGen::Fragment::ModelFragment::ResolvedReference</a></li>
        
          <li><a href="../../RGen/Instantiator.html">RGen::Instantiator</a></li>
        
          <li><a href="../../RGen/Instantiator/AbstractInstantiator.html">RGen::Instantiator::AbstractInstantiator</a></li>
        
          <li><a href="../../RGen/Instantiator/DefaultXMLInstantiator.html">RGen::Instantiator::DefaultXMLInstantiator</a></li>
        
          <li><a href="../../RGen/Instantiator/JsonInstantiator.html">RGen::Instantiator::JsonInstantiator</a></li>
        
          <li><a href="../../RGen/Instantiator/JsonParser.html">RGen::Instantiator::JsonParser</a></li>
        
          <li><a href="../../RGen/Instantiator/NodebasedXMLInstantiator.html">RGen::Instantiator::NodebasedXMLInstantiator</a></li>
        
          <li><a href="../../RGen/Instantiator/NodebasedXMLInstantiator/Visitor.html">RGen::Instantiator::NodebasedXMLInstantiator::Visitor</a></li>
        
          <li><a href="../../RGen/Instantiator/NodebasedXMLInstantiator/XMLNodeDescriptor.html">RGen::Instantiator::NodebasedXMLInstantiator::XMLNodeDescriptor</a></li>
        
          <li><a href="../../RGen/Instantiator/QualifiedNameResolver.html">RGen::Instantiator::QualifiedNameResolver</a></li>
        
          <li><a href="../../RGen/Instantiator/ReferenceResolver.html">RGen::Instantiator::ReferenceResolver</a></li>
        
          <li><a href="../../RGen/Instantiator/ReferenceResolver/UnresolvedReference.html">RGen::Instantiator::ReferenceResolver::UnresolvedReference</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder.html">RGen::MetamodelBuilder</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/BuilderExtensions.html">RGen::MetamodelBuilder::BuilderExtensions</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/BuilderExtensions/FeatureBlockEvaluator.html">RGen::MetamodelBuilder::BuilderExtensions::FeatureBlockEvaluator</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/BuilderRuntime.html">RGen::MetamodelBuilder::BuilderRuntime</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/DataTypes.html">RGen::MetamodelBuilder::DataTypes</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/DataTypes/Enum.html">RGen::MetamodelBuilder::DataTypes::Enum</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/Intermediate.html">RGen::MetamodelBuilder::Intermediate</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/Intermediate/Annotation.html">RGen::MetamodelBuilder::Intermediate::Annotation</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/Intermediate/Attribute.html">RGen::MetamodelBuilder::Intermediate::Attribute</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/Intermediate/Feature.html">RGen::MetamodelBuilder::Intermediate::Feature</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/Intermediate/Reference.html">RGen::MetamodelBuilder::Intermediate::Reference</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/MMBase.html">RGen::MetamodelBuilder::MMBase</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/MMGeneric.html">RGen::MetamodelBuilder::MMGeneric</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/MMProxy.html">RGen::MetamodelBuilder::MMProxy</a></li>
        
          <li><a href="../../RGen/MetamodelBuilder/ModuleExtension.html">RGen::MetamodelBuilder::ModuleExtension</a></li>
        
          <li><a href="../../RGen/ModelBuilder.html">RGen::ModelBuilder</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext.html">RGen::ModelBuilder::BuilderContext</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext/CommandResolver.html">RGen::ModelBuilder::BuilderContext::CommandResolver</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext/ConstPathElement.html">RGen::ModelBuilder::BuilderContext::ConstPathElement</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext/ExtensionContainerFactory.html">RGen::ModelBuilder::BuilderContext::ExtensionContainerFactory</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext/ExtensionContainerFactory/ExtensionContainer.html">RGen::ModelBuilder::BuilderContext::ExtensionContainerFactory::ExtensionContainer</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext/PackageNotFoundException.html">RGen::ModelBuilder::BuilderContext::PackageNotFoundException</a></li>
        
          <li><a href="../../RGen/ModelBuilder/BuilderContext/PackageResolver.html">RGen::ModelBuilder::BuilderContext::PackageResolver</a></li>
        
          <li><a href="../../RGen/ModelBuilder/ModelSerializer.html">RGen::ModelBuilder::ModelSerializer</a></li>
        
          <li><a href="../../RGen/ModelBuilder/ReferenceResolver.html">RGen::ModelBuilder::ReferenceResolver</a></li>
        
          <li><a href="../../RGen/ModelBuilder/ReferenceResolver/ResolverException.html">RGen::ModelBuilder::ReferenceResolver::ResolverException</a></li>
        
          <li><a href="../../RGen/ModelBuilder/ReferenceResolver/ToplevelNamespace.html">RGen::ModelBuilder::ReferenceResolver::ToplevelNamespace</a></li>
        
          <li><a href="../../RGen/Serializer.html">RGen::Serializer</a></li>
        
          <li><a href="../../RGen/Serializer/JsonSerializer.html">RGen::Serializer::JsonSerializer</a></li>
        
          <li><a href="../../RGen/Serializer/QualifiedNameProvider.html">RGen::Serializer::QualifiedNameProvider</a></li>
        
          <li><a href="../../RGen/Serializer/XMI11Serializer.html">RGen::Serializer::XMI11Serializer</a></li>
        
          <li><a href="../../RGen/Serializer/XMI20Serializer.html">RGen::Serializer::XMI20Serializer</a></li>
        
          <li><a href="../../RGen/Serializer/XMLSerializer.html">RGen::Serializer::XMLSerializer</a></li>
        
          <li><a href="../../RGen/TemplateLanguage.html">RGen::TemplateLanguage</a></li>
        
          <li><a href="../../RGen/TemplateLanguage/DirectoryTemplateContainer.html">RGen::TemplateLanguage::DirectoryTemplateContainer</a></li>
        
          <li><a href="../../RGen/TemplateLanguage/OutputHandler.html">RGen::TemplateLanguage::OutputHandler</a></li>
        
          <li><a href="../../RGen/TemplateLanguage/TemplateContainer.html">RGen::TemplateLanguage::TemplateContainer</a></li>
        
          <li><a href="../../RGen/TemplateLanguage/TemplateHelper.html">RGen::TemplateLanguage::TemplateHelper</a></li>
        
          <li><a href="../../RGen/Transformer.html">RGen::Transformer</a></li>
        
          <li><a href="../../RGen/Util.html">RGen::Util</a></li>
        
          <li><a href="../../RGen/Util/AutoClassCreator.html">RGen::Util::AutoClassCreator</a></li>
        
          <li><a href="../../RGen/Util/AutoCreatedClass.html">RGen::Util::AutoCreatedClass</a></li>
        
          <li><a href="../../RGen/Util/Base.html">RGen::Util::Base</a></li>
        
          <li><a href="../../RGen/Util/CachedGlob.html">RGen::Util::CachedGlob</a></li>
        
          <li><a href="../../RGen/Util/FileCacheMap.html">RGen::Util::FileCacheMap</a></li>
        
          <li><a href="../../RGen/Util/FileChangeDetector.html">RGen::Util::FileChangeDetector</a></li>
        
          <li><a href="../../RGen/Util/MethodDelegation.html">RGen::Util::MethodDelegation</a></li>
        
          <li><a href="../../RGen/Util/ModelComparator.html">RGen::Util::ModelComparator</a></li>
        
          <li><a href="../../RGen/Util/ModelComparatorBase.html">RGen::Util::ModelComparatorBase</a></li>
        
          <li><a href="../../RGen/Util/ModelDumper.html">RGen::Util::ModelDumper</a></li>
        
          <li><a href="../../RGen/Util/NameHelper.html">RGen::Util::NameHelper</a></li>
        
          <li><a href="../../RGen/Util/ParentAccess.html">RGen::Util::ParentAccess</a></li>
        
          <li><a href="../../RGen/Util/PatternMatcher.html">RGen::Util::PatternMatcher</a></li>
        
          <li><a href="../../RGen/Util/PatternMatcher/Bindable.html">RGen::Util::PatternMatcher::Bindable</a></li>
        
          <li><a href="../../RGen/Util/PatternMatcher/Lazy.html">RGen::Util::PatternMatcher::Lazy</a></li>
        
          <li><a href="../../RGen/Util/PatternMatcher/Proxy.html">RGen::Util::PatternMatcher::Proxy</a></li>
        
          <li><a href="../../RGen/Util/PatternMatcher/TempEnv.html">RGen::Util::PatternMatcher::TempEnv</a></li>
        
          <li><a href="../../AbstractXMLInstantiator.html">AbstractXMLInstantiator</a></li>
        
          <li><a href="../../AbstractXMLInstantiator/Visitor.html">AbstractXMLInstantiator::Visitor</a></li>
        
          <li><a href="../../MMGen.html">MMGen</a></li>
        
          <li><a href="../../MMGen/MetamodelGenerator.html">MMGen::MetamodelGenerator</a></li>
        
          <li><a href="../../Array.html">Array</a></li>
        
          <li><a href="../../EASupport.html">EASupport</a></li>
        
          <li><a href="../../ECoreToUML13.html">ECoreToUML13</a></li>
        
          <li><a href="../../ECoreXMLInstantiator.html">ECoreXMLInstantiator</a></li>
        
          <li><a href="../../IdStore.html">IdStore</a></li>
        
          <li><a href="../../Object.html">Object</a></li>
        
          <li><a href="../../UML13ToECore.html">UML13ToECore</a></li>
        
          <li><a href="../../XMI11Instantiator.html">XMI11Instantiator</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">RGen::Fragment::FragmentedModel</h1>

    <div id="description" class="description">
      
<p>A <a href="FragmentedModel.html">FragmentedModel</a> represents a model
which consists of fragments (<a
href="ModelFragment.html">ModelFragment</a>).</p>

<p>The main purpose of this class is to resolve references across fragments
and to keep the references consistent while fragments are added or removed.
This way it also plays an important role in keeping the model fragments
consistent and thus <a href="ModelFragment.html">ModelFragment</a> objects
should only be accessed via this interface. Overall unresolved references
after the resolution step are also maintained.</p>

<p>A <a href="FragmentedModel.html">FragmentedModel</a> can also  keep an <a
href="../Environment.html">RGen::Environment</a> object up to date while
fragments are added or removed. The environment must be registered with the
constructor.</p>

<p>Reference resolution is based on arbitrary identifiers. The identifiers
must be provided in the fragments' indices. The <a
href="FragmentedModel.html">FragmentedModel</a> takes care to maintain the
overall index.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="environment-attribute-method" class="method-detail">
          <a name="environment"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">environment</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="fragments-attribute-method" class="method-detail">
          <a name="fragments"></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">fragments</span><span
              class="attribute-access-type">[R]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates a fragmented model. Options:</p>

<pre>:env 
  environment which will be updated as model elements are added and removed</pre>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 31</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">options</span>={})
  <span class="ruby-ivar">@environment</span> = <span class="ruby-identifier">options</span>[<span class="ruby-value">:env</span>]
  <span class="ruby-ivar">@fragments</span> = []
  <span class="ruby-ivar">@index</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@fragment_change_listeners</span> = []
  <span class="ruby-ivar">@fragment_index</span> = {}
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="add_fragment-method" class="method-detail ">
          <a name="method-i-add_fragment"></a>

          
          <div class="method-heading">
            <span class="method-name">add_fragment</span><span
              class="method-args">(fragment)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Add a fragment.</p>
            

            
            <div class="method-source-code" id="add_fragment-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 52</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_fragment</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-identifier">invalidate_cache</span>
  <span class="ruby-ivar">@fragments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">fragment</span>
  <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@environment</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">e</span>} <span class="ruby-keyword">if</span> <span class="ruby-ivar">@environment</span>
  <span class="ruby-ivar">@fragment_change_listeners</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">fragment</span>, <span class="ruby-value">:added</span>)}
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_fragment-source -->
            
          </div>

          

          
        </div><!-- add_fragment-method -->

      
        <div id="add_fragment_change_listener-method" class="method-detail ">
          <a name="method-i-add_fragment_change_listener"></a>

          
          <div class="method-heading">
            <span class="method-name">add_fragment_change_listener</span><span
              class="method-args">(listener)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds a proc which is called when a fragment is added or removed The proc
receives the fragment and one of :added, :removed</p>
            

            
            <div class="method-source-code" id="add_fragment_change_listener-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_fragment_change_listener</span>(<span class="ruby-identifier">listener</span>)
  <span class="ruby-ivar">@fragment_change_listeners</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">listener</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_fragment_change_listener-source -->
            
          </div>

          

          
        </div><!-- add_fragment_change_listener-method -->

      
        <div id="index-method" class="method-detail ">
          <a name="method-i-index"></a>

          
          <div class="method-heading">
            <span class="method-name">index</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the overall index.  This is a Hash mapping identifiers to model
elements accessible via the identifier.</p>
            

            
            <div class="method-source-code" id="index-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 112</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
  <span class="ruby-identifier">fragments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@fragment_index</span>[<span class="ruby-identifier">f</span>] <span class="ruby-operator">||</span> (<span class="ruby-ivar">@fragment_index</span>[<span class="ruby-identifier">f</span>].<span class="ruby-identifier">object_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">index</span>.<span class="ruby-identifier">object_id</span>)
      <span class="ruby-ivar">@fragment_index</span>[<span class="ruby-identifier">f</span>] = <span class="ruby-identifier">f</span>.<span class="ruby-identifier">index</span>
      <span class="ruby-identifier">invalidate_cache</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@index</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@index</span>
  <span class="ruby-ivar">@index</span> = {}
  <span class="ruby-identifier">fragments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">index</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> 
      (<span class="ruby-ivar">@index</span>[<span class="ruby-identifier">i</span>[<span class="ruby-value">0</span>]] <span class="ruby-operator">||=</span> []) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">i</span>[<span class="ruby-value">1</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@index</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- index-source -->
            
          </div>

          

          
        </div><!-- index-method -->

      
        <div id="remove_fragment-method" class="method-detail ">
          <a name="method-i-remove_fragment"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_fragment</span><span
              class="method-args">(fragment)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Removes the fragment. The fragment will be unresolved using
unresolve_fragment.</p>
            

            
            <div class="method-source-code" id="remove_fragment-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_fragment</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;fragment not part of model&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@fragments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-identifier">invalidate_cache</span>
  <span class="ruby-ivar">@fragments</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-ivar">@fragment_index</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-identifier">unresolve_fragment</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@environment</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">e</span>)} <span class="ruby-keyword">if</span> <span class="ruby-ivar">@environment</span>
  <span class="ruby-ivar">@fragment_change_listeners</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-identifier">l</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">fragment</span>, <span class="ruby-value">:removed</span>)}
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_fragment-source -->
            
          </div>

          

          
        </div><!-- remove_fragment-method -->

      
        <div id="remove_fragment_change_listener-method" class="method-detail ">
          <a name="method-i-remove_fragment_change_listener"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_fragment_change_listener</span><span
              class="method-args">(listener)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="remove_fragment_change_listener-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 46</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_fragment_change_listener</span>(<span class="ruby-identifier">listener</span>)
  <span class="ruby-ivar">@fragment_change_listeners</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">listener</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_fragment_change_listener-source -->
            
          </div>

          

          
        </div><!-- remove_fragment_change_listener-method -->

      
        <div id="resolve-method" class="method-detail ">
          <a name="method-i-resolve"></a>

          
          <div class="method-heading">
            <span class="method-name">resolve</span><span
              class="method-args">(options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Resolve references between fragments.  It is assumed that references within
fragments have already been resolved. This method can be called several
times. It will update the overall unresolved references.</p>

<p>Options:</p>

<pre>:fragment_provider: 
  Only if a +fragment_provider+ is given, the resolve step can be reverted later on
  by a call to unresolve_fragment. The fragment provider is a proc which receives a model
  element and must return the fragment in which the element is contained.

:use_target_type: 
  reference resolver uses the expected target type to narrow the set of possible targets</pre>
            

            
            <div class="method-source-code" id="resolve-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resolve</span>(<span class="ruby-identifier">options</span>={})
  <span class="ruby-ivar">@fragments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">f</span>.<span class="ruby-identifier">resolve_external</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- resolve-source -->
            
          </div>

          

          
        </div><!-- resolve-method -->

      
        <div id="unresolve_fragment-method" class="method-detail ">
          <a name="method-i-unresolve_fragment"></a>

          
          <div class="method-heading">
            <span class="method-name">unresolve_fragment</span><span
              class="method-args">(fragment)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Remove all references between this fragment and all other fragments. The
references will be replaced with unresolved references (MMProxy objects).</p>
            

            
            <div class="method-source-code" id="unresolve_fragment-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unresolve_fragment</span>(<span class="ruby-identifier">fragment</span>)
  <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">unresolve_external</span>
  <span class="ruby-ivar">@fragments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">f</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">fragment</span>
      <span class="ruby-identifier">f</span>.<span class="ruby-identifier">unresolve_external_fragment</span>(<span class="ruby-identifier">fragment</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- unresolve_fragment-source -->
            
          </div>

          

          
        </div><!-- unresolve_fragment-method -->

      
        <div id="unresolved_refs-method" class="method-detail ">
          <a name="method-i-unresolved_refs"></a>

          
          <div class="method-heading">
            <span class="method-name">unresolved_refs</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the overall unresolved references.</p>
            

            
            <div class="method-source-code" id="unresolved_refs-source">
<pre>
<span class="ruby-comment"># File lib/rgen/fragment/fragmented_model.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unresolved_refs</span>
  <span class="ruby-ivar">@fragments</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">unresolved_refs</span>}.<span class="ruby-identifier">flatten</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- unresolved_refs-source -->
            
          </div>

          

          
        </div><!-- unresolved_refs-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

